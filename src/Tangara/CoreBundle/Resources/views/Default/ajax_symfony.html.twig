<!DOCTYPE html>
<html>
    <head>
        
        <style>
            button {
                width:150px;
                margin-top: 10px;
            }
            #title {
                float:left;
                position: relative;
            }
            #myDiv2 {
                float:left;
                position: relative;
            }
            input {
                width: 50%;
            }
            .endurl{
                width: 200px;
            }
            #myDiv{
                width: 500px;
                position: absolute;
            }
            .setProgramContent{
                width: 100%;
                height: 150px;
                background-color: gray;
            }
        </style>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.js"></script>
        <script>
            function getUrl(balise) {
                baseurl = $(".url").val();
                endurl = $("#" + balise).val();
                url = baseurl + endurl;
                $("#" + balise).focus();
                return url;
            }
            function getFile(balise) {
                file = $("#" + balise + "Files").val();
                return file;
            }
            
            function getTangaraFiles()
            {
                var url = getUrl("getTangaraFiles");

                $.ajax({
                    type: "GET",
                    dataType: "json",
                    url: url,
                    error: function(msg) {
                        alert("Error !: " + msg);
                    },
                    success: function(data) {
                        var items = [];
                        $.each(data, function(key, val) {
                            items.push("<li id='" + key + "'>" + val + "</li>");
                        });
                        
                        $("<ul/>", {
                            "class": "my-new-list",
                            html: items.join("")
                        }).appendTo("#myDiv");
                        //affiche le contenu du fichier dans le conteneur dédié
                        $('#myDiv').append(JSON.stringify(data));

                    }});
            }
            function getResources()
            {
               var url = getUrl("getResources");

                $.ajax({
                    type: "GET",
                    dataType: "json",
                    url: url,
                    error: function(msg) {
                        alert("Error !: " + msg);
                    },
                    success: function(data) {
                        var items = [];
                        $.each(data, function(key, val) {
                            items.push("<li id='" + key + "'>" + val + "</li>");
                        });
                        
                        $("<ul/>", {
                            "class": "my-new-list",
                            html: items.join("")
                        }).appendTo("#myDiv");
                        //affiche le contenu du fichier dans le conteneur dédié
                        $('#myDiv').append(JSON.stringify(data));
                    }});
            }
            function createProgram()
            {
                var url = getUrl("createProgram");
                var file = getFile("createProgram");
                
                $.post(url, {file: file}, function(data) {
                    $('#myDiv').append("<ul><li>" + JSON.stringify(data) + "</li></ul>");
                });
            }
            function setProgramContent()
            {
                var url = getUrl("setProgramContent");
                var file = getFile("setProgramContent");
                var content = $(".setProgramContent").val();
                $.post(url, {file: file,data:content}, function(data) {
                    $('#myDiv').append("<ul><li>" + JSON.stringify(data) + "</li></ul>");
                });

            }

            function getProgramContent()
            {
                var url = getUrl("getProgramContent");
                var file = getFile("getProgramContent");
                $.post(url, {file: file}, function(data) {
                    $('#myDiv').append("<ul><li>" + data + "</li></ul>");
                });
            }
            function getlocale()
            {
                var url = getUrl("getlocale");
                $.ajax({
                    type: "GET",
                    dataType: "json",
                    url: url,
                    error: function(msg) {
                        alert("Error !: " + msg);
                    },
                    success: function(data) {
                        var items = [];
                        $.each(data, function(key, val) {
                            items.push("<li id='" + key + "'>" + val + "</li>");
                        });
                        $("<ul/>", {
                            "class": "my-new-list",
                            html: items.join("")
                        }).appendTo("#myDiv");
                        //affiche le contenu du fichier dans le conteneur d�di�
                        //$('#contenu_fichier_ajax').html(data);
                    }});
            }
            function clearDiv()
            {
                $('#myDiv').empty();
            }

            function removeFile() {

                var url = getUrl("removeFile");
                var file = getFile("removeFile");
                $.post(url, {file: file}, function(data) {
                    $('#myDiv').append("<ul><li>" + JSON.stringify(data) + "</li></ul>");
                });
            }
        </script>
        <title>TangaraUI Ajax tests</title>
    </head>
    <body>
        <input class="url" name="regis" value="http://localhost/tangara-ui/web/app_dev.php/"><br/>
        <div id="title">
            <h2>Actions for Benoit</h2>
            <button type="button" onclick="getTangaraFiles()">getTangaraFiles</button>
            <input class="endurl" name="un" id="getTangaraFiles" value="tangarajs/gettangarafiles"/>
            <input class="endurl" name="un" id="getTangaraFilesFiles" value="no value" disabled/>
            <br/>
            <button type="button" onclick="getResources()">getResources</button>
            <input class="endurl" name="quatre" id="getResources" value="tangarajs/getresources"/>
            <input class="endurl" name="quatre" id="getResourcesFiles" value="no value" disabled/>
            <br/>
            <button type="button" onclick="createProgram()">createProgram</button>
            <input class="endurl" name="deux" id="createProgram" value="tangarajs/create"/>
            <input class="endurl" name="deux" id="createProgramFiles" value="bob.tgr"/>
            <br/>
            <button type="button" onclick="getProgramContent()">getProgramContent</button>
            <input class="endurl" name="trois" id="getProgramContent" value="tangarajs/getcontent"/>
            <input class="endurl" name="trois" id="getProgramContentFiles"value="bob.tgr"/>
            <br/>
            <button type="button" onclick="setProgramContent()">setProgramContent</button>
            <input class="endurl" name="neuf" id="setProgramContent" value="tangarajs/setcontent"/>
            <input class="endurl" name="neuf" id="setProgramContentFiles"value="bob.tgr"/>
            <br/>
            <button type="button" onclick="getlocale()">getLocale</button>
            <input class="endurl" name="six" id="getlocale" value="locale"/>
            <input class="endurl" name="six" id="getlocaleFiles" value="no value" disabled/>
            <br/>
            <button type="button" onclick="removeFile()">removeFile</button>
            <input class="endurl" name="huit" id="removeFile" value="tangarajs/remove"/>
            <input class="endurl" name="huit" id="removeFileFiles" value="bob.tgr"/>
            <br/>
            <button type="button" onclick="clearDiv()">clearDiv</button>
            <input class="endurl" name="sept" id="clearDiv" value="tangarajs/getresources"/>
            <input class="endurl" name="sept" id="clearDivFiles" value="no value" disabled/>
            <br/>
            <textarea class="setProgramContent" name="content">file content</textarea>
        </div>

        <div id="myDiv2">
            <h2>Ajax Results</h2>
            <div id="myDiv">
                <h2>Let AJAX change this text</h2>
            </div>
        </div>
    </body>
</html>


